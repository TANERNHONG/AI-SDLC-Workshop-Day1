# LLM-Assisted PRD Creator ‚Äî Guided, Step-by-Step (Reverse Prompting)

## Behavior Rules (read carefully)
You are a senior product manager facilitating a concise but realistic PRD. 
Follow this loop on every turn until the PRD is complete:

1) Ask exactly ONE focused question for the next missing section.
2) Provide a short, concrete EXAMPLE answer (1‚Äì2 lines) for guidance.
3) Update the ‚ÄúCurrent PRD Draft‚Äù with the user‚Äôs latest answer ONLY in the relevant fields.
4) Show ‚ÄúWhat‚Äôs Next‚Äù (the next section you will ask about).
5) When all sections are filled, output ONLY the final PRD in Markdown (no examples, no guidance text).

Constraints:
- Keep questions short and specific.
- Don‚Äôt jump sections; fill in order.
- Keep the draft compact and readable.
- If the user‚Äôs answer is unclear, ask a micro follow-up (one line) before updating.

## Sections & Order
1. Product Overview (Title, Summary, Target Audience)
2. Goals & Success Metrics (Business Goals, User Goals, Key Metrics)
3. User Personas (1‚Äì2)
4. Core Features (3‚Äì5, with short description + priority)
5. User Journey (key steps from start to goal)
6. Technical Considerations (platforms, integrations, data, privacy)
7. Risks & Dependencies (top 2‚Äì4)
8. Timeline & Milestones (MVP ‚Üí Beta ‚Üí Launch)

## Current PRD Draft (update this block every turn)
PRD_DRAFT = {
  "Product Overview": {
    "Title": "MQL5 Expert Advisor Builder - Multi-Page Visual Code Assembly Platform with Trading Journal",
    "Summary": "A visual drag-and-drop web-based platform for assembling Expert Advisors (EAs) for MetaTrader 5 without writing code from scratch, plus comprehensive trading journal for performance tracking. **Current Implementation Status (20% Complete - 3/15 Features):** ‚úÖ IMPLEMENTED: (1) Collapsible sidebar navigation system (64px collapsed/240px expanded) with keyboard shortcut (Ctrl/Cmd+B) enabling multi-page architecture for 6 pages (Dashboard active, Trading Journal/Settings/Templates/Documentation/Export History planned), (2) Event Handler Tab in Code Library with toggleable switches for 15 MQL5 event handlers (OnInit/OnDeinit always included, 13 optional handlers including OnStart, OnTick, OnCalculate, OnTimer, OnTrade, OnTradeTransaction, OnBookEvent, OnChartEvent, OnTester handlers) organized in 6 categories with visual indicators and best practices guidance, (3) Workspace Block Management with Automatic Global Variable Generation featuring mini blocks with always-visible styled input fields for manual value editing, real-time validation (green/red borders), keyboard navigation, dependency tracking, and auto-grouping in dedicated section. üìã PLANNED (12 features): Trading Journal & Calendar (HIGH PRIORITY - Page 2 with 4 view modes Day/Week/Month/Yearly, CSV import, manual trade entry with 9 fields, color-coded performance visualization, daily statistics), Dashboard layout with 3-column structure, drag-and-drop system, code snippet library across 5 tabs (Utilities/Indicators/Pre-made Functions/Event Handlers/Documentations), custom snippet creation, documentation management with Markdown support, code assembly engine, code preview, and export system. Foundation architecture in place for rapid feature expansion.",
    "Target Audience": "MetaTrader 5 traders and algorithmic trading system developers, from beginners with no MQL5 knowledge to professional EA developers seeking workflow acceleration. Secondary audience: trading educators demonstrating EA concepts, trading journal users tracking manual and automated trading performance, and development teams collaborating on trading systems. The multi-page navigation architecture appeals to power users who will manage multiple EAs, track trading history via journal calendar, and require organized access to templates, settings, and export history."
  },
  "Goals & Success Metrics": {
    "Business Goals": "**Phase 1 (Current - Foundation):** Establish robust multi-page navigation architecture for 6 pages, validate event handler configuration UX, prove global variable management system with manual input editing. **Phase 2 (High Priority - Trading Tools):** Launch Trading Journal & Calendar for performance tracking and trade analysis, enable trade data import from MT5/brokers. **Phase 3-5 (Planned):** Enable rapid EA prototyping (<15 min for basic EA), eliminate technical barriers to algorithmic trading, create knowledge management platform combining code assembly with documentation and trading journal, build foundation for community-driven snippet/template sharing.",
    "User Goals": "**Current Implementation:** Navigate efficiently between 6 app sections using collapsible sidebar (Ctrl/Cmd+B), configure which MQL5 event handlers to include in EAs (toggle 13 optional handlers), manage global variable values through styled input fields with real-time validation. **Planned Phase 2 Goals:** Track trading performance in visual calendar with 4 view modes (Day/Week/Month/Yearly), import trade history via CSV from broker platforms, manually log trades with 9-field entry form, analyze daily statistics (volume, # trades, win rate, P/L, comments), identify profitable patterns and trading consistency. **Planned Phase 3-5 Goals:** Assemble working EAs by drag-dropping pre-built snippets, customize indicator parameters through inline editing, document trading strategies alongside code, organize reusable components in custom tabs, export production-ready MQL5 code for MetaEditor, compare EA backtest results with live journal data.",
    "Key Metrics": "**Foundation Metrics (Current Focus):** Sidebar usage patterns (collapse/expand frequency, keyboard shortcut adoption >40%, page navigation distribution), event handler selection patterns (average handlers enabled, OnTick adoption rate >80% for trading EAs, preset usage rate), global variable editing engagement (% users who modify default values >60%, validation error rate <10%, keyboard navigation adoption). **Phase 2 Trading Journal Metrics:** Journal adoption rate (>50% of users add trades within first week), average trades logged per active user (>20/month), CSV import usage (>40% use CSV import), calendar view distribution (Month view >60% usage, Yearly view for long-term analysis >20%), daily statistics review frequency (>3 times per week), trade comment completion rate (>70% trades have meaningful comments), win rate tracking accuracy. **Future Metrics (Post-MVP):** EAs created per user (3+/month), time to first export (<15 min basic), documentation creation rate (>40% create 1+ doc), custom content creation (>30%), weekly active users (>60%), compilation success rate (>90%), NPS score (>50), EA performance vs manual trading comparison engagement (>30%)."
  },
  "User Personas": [
    {
      "Name": "Alex the Retail Trader",
      "Role/Segment": "Experienced forex trader (3+ years) with basic programming knowledge (HTML/CSS, maybe Python basics)",
      "Goals": "Wants to automate personal trading strategies without deep MQL5 expertise, needs to quickly test multiple strategy variations with different parameters, seeks to build and maintain 3-5 personal EAs, wants to document strategy logic for future reference and optimization",
      "Pain Points": "Limited time to learn complex programming languages (tried MQL5, gave up after 2 weeks), frustrated by trial-and-error coding and compilation errors, struggles with MQL5 event handler concepts, needs faster iteration cycles (current manual coding takes days), forgets why certain parameters were chosen months later, lacks organized documentation of trading strategies"
    },
    {
      "Name": "Sarah the Algorithm Developer",
      "Role/Segment": "Professional algo-trader building EAs for 10-15 clients annually, 5+ years MQL5 experience",
      "Goals": "Speed up EA development workflow (currently 40-60 hours per client EA), reuse common trading logic across client projects, maintain organized library of tested components with documentation, reduce repetitive boilerplate coding, deliver faster turnaround to clients, document parameter choices for client education",
      "Pain Points": "Spends 30-40% of time on boilerplate code (indicators, risk management, time filters), copy-pasting code between projects introduces subtle bugs, difficult to organize 100+ reusable functions across projects, client projects have tight 2-week deadlines, clients constantly ask 'why this parameter value?', lacking centralized knowledge base for EA patterns"
    },
    {
      "Name": "Marcus the Trading Educator",
      "Role/Segment": "Trading coach teaching algorithmic trading to 20-30 students per cohort, runs 8-week online courses",
      "Goals": "Demonstrate EA building visually to students in live sessions, help students understand EA structure and event flow without code overwhelm, enable students to create their first working EA in week 3 of course, provide students with documentation templates for strategy planning, teach parameter optimization concepts through hands-on editing",
      "Pain Points": "Students intimidated by blank MetaEditor screen and MQL5 syntax, hard to teach abstract concepts (OnInit vs OnTick) in 2-hour sessions, students spend 80% of time debugging syntax errors instead of learning strategy logic, need hands-on tools that work in first try, students lack structured approach to documenting strategies, 50% dropout rate when coding starts"
    },
    {
      "Name": "Jennifer the Trading Team Lead",
      "Role/Segment": "Manages team of 4 junior traders developing proprietary EAs for hedge fund",
      "Goals": "Standardize EA development process across team, ensure consistent code structure and documentation, enable junior traders to build EAs with less supervision, maintain knowledge base of team's trading strategies and parameter rationale, accelerate onboarding of new team members (currently 3 months to productivity)",
      "Pain Points": "Each team member codes differently (inconsistent patterns), juniors reinvent the wheel instead of reusing team's code, strategy knowledge locked in individual team members' heads, difficult to review and understand team members' EAs, no centralized documentation of why strategies work or fail, 3-month onboarding time too long"
    },
    {
      "Name": "David the Trading Journal User",
      "Role/Segment": "Active day trader executing 15-30 trades per day across multiple instruments (forex, indices, crypto), mix of manual and EA-assisted trading",
      "Goals": "Track all trading activity in one centralized location, analyze daily/weekly/monthly performance trends, identify which trading sessions and instruments are most profitable, maintain detailed trade notes for pattern recognition, compare manual trading performance vs EA performance, import broker statements automatically to save time on data entry, review win rates and profit factors across different strategies",
      "Pain Points": "Currently uses spreadsheets (manual data entry takes 15+ min per day, prone to errors), broker platforms have limited analytics (no custom metrics, can't compare strategies easily), forgets to log emotional state and market conditions during trades (loses valuable context), spreadsheet becomes unwieldy with 500+ trades per month (performance slows down), no visual calendar to see profitable vs losing days at a glance, difficult to correlate trading performance with external factors (news events, market volatility), switching between broker platform, spreadsheet, and MT5 is time-consuming"
    }
  ],
  "Core Features": [
    { "Feature Name": "‚úÖ PRP-01: Sidebar Navigation System (IMPLEMENTED)", "Description": "Collapsible left-side navigation bar (64px collapsed, 240px expanded) enabling multi-page architecture for 6 pages. Collapsed state shows icon-only buttons (üè† Dashboard, üìä Trading Journal, ‚öôÔ∏è Settings, üìã Templates, üìö Documentation, üì¶ Export History). Expanded state shows full labels with current page indicator. Smooth 300ms animation during toggle. Keyboard shortcut Ctrl/Cmd+B for toggle. State persistence in localStorage. Currently Dashboard is active; other pages show 'Coming Soon' placeholders for future development (Trading Journal is HIGH PRIORITY for Phase 2). Benefits: maximizes workspace area when collapsed, future-ready architecture for seamless feature addition, quick navigation between app sections. Hamburger menu icon (‚ò∞) at top triggers expansion. Responsive behavior on mobile (<768px) with overlay mode.", "Priority": "P0 (Critical - Foundation) - COMPLETED" },
    { "Feature Name": "‚úÖ PRP-02: Event Handler Tab (IMPLEMENTED)", "Description": "Tab within Code Library (right side) with toggleable switches for 15 MQL5 event handlers. OnInit and OnDeinit always included (required, grayed out). 13 optional handlers toggleable: OnStart, OnTick, OnCalculate, OnTimer, OnTrade, OnTradeTransaction, OnBookEvent, OnChartEvent, OnTester, OnTesterInit, OnTesterDeinit, OnTesterPass. Visual indicators (green checkmark when enabled), tooltips explaining each handler's purpose and use cases, dependency warnings (e.g., OnTimer requires EventSetTimer in OnInit), quick preset buttons (Standard EA, Time-Based, Strategy Tester). Integrated with future code assembly engine to generate only enabled handlers. Organized in 6 categories: Required (2), Trading (2), Lifecycle (5), Data (1), Interaction (2), Testing (3). Enables fine-grained control over EA event processing capabilities.", "Priority": "P0 (Critical - Foundation) - COMPLETED" },
    { "Feature Name": "‚úÖ PRP-03: Workspace Management with Automatic Global Variable Generation (IMPLEMENTED)", "Description": "Workspace with 3 organized sections and automatic global variable system. When code snippets (indicators, utilities, risk management) are dragged to workspace, system automatically creates mini global variable blocks with **always-visible styled input fields** for manual value editing. Primary Feature: Editable input fields with 4 visual states (light gray default, blue focus border when clicked, red invalid border with error message, green modified with checkmark). Real-time validation with min/max/step constraints, number spinners (‚ñ≤‚ñº) for numeric values, toggle switches for booleans. Keyboard navigation (Tab between fields, Enter to save, Escape to cancel, arrows for increment). Inline editing with auto-select text on focus. Dependency tracking shows which main code blocks use each global (üîó icon). Smart deletion warnings when global is in use. Auto-grouping in dedicated Global Variables Section at top of workspace with light blue background, collapsible, sortable A-Z, count badge. Bulk editing: select multiple globals and apply changes together. Reset to default button. Examples: RSI indicator creates g_rsi_period=14, g_rsi_overbought=70.0, g_rsi_oversold=30.0 with editable input fields; ATR creates g_indicator_atr_period=14.", "Priority": "P0 (Critical - Core UX) - COMPLETED" },
    { "Feature Name": "üìã PRP-04: Dashboard Layout & Structure (PLANNED)", "Description": "Responsive 3-column layout integrating with implemented sidebar: (1) Sidebar Navigation (far left, 64px collapsed/240px expanded - IMPLEMENTED), (2) Workspace (center, expandable drop zone with 3 sections: Global Variables Section with input fields - IMPLEMENTED, Event Handlers Section showing enabled handlers - PARTIAL, Main Code Blocks Section - PLANNED), (3) Code Library (right side, tabbed interface with 5 default tabs: Utilities, Indicators, Pre-made Functions, Event Handlers - IMPLEMENTED, Documentations - PLANNED, plus custom tabs), (4) Bottom Bar (full width minus sidebar, Preview and Save buttons). Main content dynamically adjusts based on sidebar state (ml-16 collapsed, ml-60 expanded). Visual separators, collapsible panels, split-screen for documentation viewing. Mobile overlay behavior (<768px).", "Priority": "P0 (Critical - Foundation) - NEXT PHASE" },
    { "Feature Name": "üìã PRP-05: Drag-and-Drop System (PLANNED)", "Description": "Intuitive drag-and-drop using dnd-kit or React DnD for snippet manipulation. Features: drag snippets from library to workspace with visual feedback (ghost image, drop zone highlighting), insert between existing blocks with insertion indicator (dotted line), reorder blocks within workspace, drag global variable blocks within globals section, cannot drag documentation blocks (text-only reference). Undo/redo support, keyboard accessibility (Space to grab, arrows to move, Enter to drop), multi-select for bulk operations, snap-to-grid optional alignment. Dependency: requires Dashboard Layout (PRP-04) and integrates with Workspace Management (PRP-03 - IMPLEMENTED).", "Priority": "P0 (Critical) - NEXT PHASE" },
    { "Feature Name": "üìã PRP-15: Trading Journal & Calendar (PLANNED - HIGH PRIORITY)", "Description": "Comprehensive trading journal tool accessible via Sidebar Page 2 (üìä Trading Journal icon). Trading calendar with 4 view modes: (1) Day View - hourly breakdown with cumulative P/L graph, trade-by-trade timeline, (2) Week View - 7-day grid with color-coded days and week totals, (3) Month View (default) - full calendar with each day showing background color (green=profit, red=loss, gray=no trades) plus Volume, # Trades, Win Rate %, P/L, Comments icon (üìù), month totals in sidebar, (4) Yearly View - 12-month overview with color intensity based on monthly P/L, annual statistics. Manual Trade Entry: + button opens modal with 9-field form (Type: Buy/Sell, Volume: lots, Symbol: instrument, Date/Time: timestamp, Profit/Loss: net in account currency, Broker: broker name, Platform: MT5/MT4/etc, Security Type: Forex/Stocks/Crypto/etc, Comments: trade notes/strategy). CSV Import: bulk import trades from broker platforms with preview and duplicate detection (columns: Type,Volume,Symbol,DateTime,ProfitLoss,Broker,Platform,SecurityType,Comments). Daily Statistics overlay: Volume (total lots), # of Trades (count), Win Rate (%), P/L (net), General Comments (day-level notes). Additional features: trade filtering/search (by date range, symbol, broker, P/L, type), export as CSV/PDF, performance analytics (win rate trends, profit factor, avg win vs loss, symbol breakdown, time-of-day heatmap), integration with EA backtest results (import from exported EAs, compare live vs backtest performance, tag trades as EA or Manual). Addresses David persona's need for centralized tracking, visual calendar, automated import, and pattern recognition.", "Priority": "P0 (Critical - High Priority) - PHASE 2" },
    { "Feature Name": "üìã PRP-06: Code Snippet Library (PLANNED)", "Description": "Pre-built MQL5 code snippets organized in 5 default tabs, each with 20-30+ snippets: (1) Utilities Tab - position sizing (risk-based lots, fixed lots), risk management (trailing stop, break even, max daily loss), time filters (trading hours, session filters, day of week), account functions (balance checks, margin verification), price utilities (pip value, spread calculator); (2) Indicators Tab - trend indicators (MA, MACD, ADX, Parabolic SAR), momentum (RSI, Stochastic, CCI), volatility (Bollinger Bands, ATR, Standard Deviation), volume indicators; (3) Pre-made Functions Tab - complete entry/exit logic, trade management systems, risk management systems, complete EA templates; (4) Event Handlers Tab - IMPLEMENTED (PRP-02) with 15 toggleable handlers; (5) Documentations Tab - PLANNED (PRP-11). Each code snippet displays: solid border, title, description, parameters, return type, code preview. Snippets that generate globals (indicators, utilities) integrate with Global Variable Generation system (PRP-03 - IMPLEMENTED).", "Priority": "P0 (Critical) - PHASE 3" },
    { "Feature Name": "üìã PRP-07: Library Tabs Management (PLANNED)", "Description": "Tab system for organizing snippets and documentation. Default 5 tabs: Utilities, Indicators, Pre-made Functions, Event Handlers (IMPLEMENTED - PRP-02), Documentations. User features: create custom tabs with + button, modal for tab name/description/icon, rename/delete tabs (except 5 default tabs), reorder tabs via drag, tab persistence in localStorage, export/import tab configurations for sharing. Integrates with Custom Snippet Creation (PRP-08) and Documentations Management (PRP-11).", "Priority": "P1 (High) - PHASE 3" },
    { "Feature Name": "üìã PRP-08: Custom Code Snippets (PLANNED)", "Description": "Users create and manage custom code snippets within library tabs. Add snippet: dotted border '+ Add Custom Snippet' button opens modal with fields (name, description, code textarea with MQL5 syntax highlighting, category dropdown, parameters list, global variables definitions with default values). MQL5 syntax validation with error highlighting, save to localStorage. Edit/delete custom snippets via right-click context menu or snippet settings. Move snippets between tabs. Integration with Global Variable Generation system (PRP-03) - custom snippets can declare globals. Export/import snippet collections for team sharing.", "Priority": "P1 (High) - PHASE 3" },
    { "Feature Name": "üìã PRP-09: Utilities Tab Content (PLANNED)", "Description": "Curated collection of 30+ utility snippets for Utilities tab covering: Position Sizing (calculate lot size by risk %, fixed lot calculator, lot size validator), Risk Management (trailing stop by pips/ATR, break even after X pips, max daily loss checker, drawdown monitor), Time Filters (trading hours validator, session filter London/NY/Tokyo, day of week filter, news event filter), Account Functions (balance/equity checks, margin requirement calculator, free margin validator, account profit tracker), Price Utilities (pip value calculator, spread to pips converter, price level rounder, symbol info retriever). Each snippet generates 1-3 global variables for parameters using Global Variable Generation system (PRP-03 - IMPLEMENTED). All snippets pre-tested in MT5 Build 3865+.", "Priority": "P1 (High) - PHASE 4" },
    { "Feature Name": "üìã PRP-10: Indicators Tab Content (PLANNED)", "Description": "Curated collection of 25+ technical indicator snippets for Indicators tab covering: Trend Indicators (MA Simple/Exponential/Weighted, MACD with signal, ADX trend strength, Parabolic SAR, Ichimoku), Momentum Indicators (RSI overbought/oversold, Stochastic %K/%D, CCI commodity channel, Momentum oscillator, Williams %R), Volatility Indicators (Bollinger Bands with deviation, ATR volatility, Standard Deviation, Keltner Channel), Volume Indicators (Volume MA, On-Balance Volume, Accumulation/Distribution). Each indicator generates 2-5 global variables for parameters (periods, thresholds, deviations) using Global Variable Generation system (PRP-03 - IMPLEMENTED). Includes complete handle initialization and buffer reading logic.", "Priority": "P1 (High) - PHASE 4" },
    { "Feature Name": "üìã PRP-11: Documentations Tab Content (PLANNED)", "Description": "Dedicated tab for custom written documentation in text form (non-code reference material). Features: create documentation with title/category/tags/content, 6 categories (Strategy Explanations, Parameter Guides, Setup Instructions, Troubleshooting Notes, Trading Journal Notes, General Notes), Markdown formatting support (headings, bold, italic, lists, checkboxes, code blocks, tables), preview mode toggle, search and filter by category/tags, export as .txt/.md/.pdf, import documentation files, bulk export as .zip, 10+ documentation templates (strategy explanation, parameter rationale, setup guide), pin important docs to top, split-screen viewing while building EA (reference docs alongside code), version history (optional). Documentation blocks: white/cream background (vs colored code blocks), text icon (üìÑ), cannot be dragged to workspace (reference only). Complements code assembly with knowledge management. Note: Different from Trading Journal (PRP-15) which is for trade tracking with calendar visualization.", "Priority": "P1 (High - Differentiation) - PHASE 4" },
    { "Feature Name": "üìã PRP-12: Code Assembly Engine (PLANNED)", "Description": "Combines workspace blocks into proper MQL5 EA structure with correct ordering: (1) File header comments with metadata, (2) Property directives (#property strict, copyright, version), (3) Include directives (#include), (4) Global variables from mini blocks (reads current values from input fields via PRP-03, sorted by workspace position), (5) Input parameters (optional user-defined inputs), (6) Event handlers (only enabled handlers from Event Handler Tab PRP-02, correct order: OnStart ‚Üí OnInit ‚Üí OnDeinit ‚Üí OnTick ‚Üí OnCalculate ‚Üí OnTimer ‚Üí OnTrade ‚Üí OnTradeTransaction ‚Üí OnBookEvent ‚Üí OnChartEvent ‚Üí OnTester ‚Üí OnTesterInit ‚Üí OnTesterDeinit ‚Üí OnTesterPass), (7) Custom functions from main code blocks. Features: dependency resolution, variable deduplication, automatic indentation (3-space), comment generation for each section, integration with global variable input fields (PRP-03 reads modified values), integration with event handler sidebar (PRP-02 filters enabled handlers). Output validated MQL5 code ready for MetaEditor. Can optionally export trade results to Trading Journal (PRP-15) for performance comparison.", "Priority": "P0 (Critical) - PHASE 5" },
    { "Feature Name": "üìã PRP-13: Code Preview System (PLANNED)", "Description": "Modal preview of assembled code before export. Features: Monaco Editor or Prism.js with MQL5 syntax highlighting, statistics panel (lines of code, number of functions, number of blocks used, enabled event handlers count from PRP-02, global variables count from PRP-03, compilation estimate), copy to clipboard button (full code or selected lines), basic syntax validation (bracket matching, semicolon checks, function signature validation), error highlighting with line numbers, download preview as .mq5 file, side-by-side comparison (if editing existing EA), search within preview (Ctrl/Cmd+F), collapsible sections mirroring workspace structure (globals/handlers/functions). Shows real-time assembly from Code Assembly Engine (PRP-12).", "Priority": "P1 (High) - PHASE 5" },
    { "Feature Name": "üìã PRP-14: Save & Export System (PLANNED)", "Description": "Complete save/export functionality. Save/Export: export assembled EA as .txt file (MetaEditor compatible, uses Code Assembly Engine PRP-12), automatic filename with timestamp (EA_StrategyName_20251113_143022.txt), save workspace configuration (block positions, global variable values from input fields PRP-03, enabled handlers from PRP-02, custom tabs PRP-07, documentation PRP-11), load previous workspace, export workspace as JSON for team sharing, version management (track changes over time), batch export (create multiple EA variations). Persistence: localStorage for workspace state, global variable values, event handler selections (PRP-02), custom snippets/tabs (PRP-07/08), documentation blocks (PRP-11), recent projects list (last 10), auto-save every 30 seconds (configurable), export/import for backup when approaching 10MB localStorage limit.", "Priority": "P0 (Critical) - PHASE 5" },
    { "Feature Name": "üìã Future: Search & Organization (PLANNED)", "Description": "Advanced organization features for large snippet libraries. Global search across all tabs (code snippets and documentation), filter by category/tags, sort options (alphabetical, recently used, most used), favorites/bookmarks for frequently used snippets, snippet usage analytics (track which snippets used most), dependency graph visualization (show relationships between globals from PRP-03 and main blocks), code block grouping with labels/colors, workspace zoom controls, minimap for large workspaces (50+ blocks). Low priority until core features complete.", "Priority": "P2 (Nice-to-Have) - POST-LAUNCH" }
  ],
  "User Journey": "**CURRENT IMPLEMENTATION (Phase 1 - 20% Complete):** 1) User opens app at localhost:3000, lands on Dashboard page with ‚úÖ sidebar collapsed (64px, icon-only) on far left showing üè† Dashboard (highlighted), üìä Trading Journal, ‚öôÔ∏è Settings, üìã Templates, üìö Documentation, üì¶ Export History (PRP-01 IMPLEMENTED with 6 pages). 2) User hovers over sidebar icons to see tooltips, clicks hamburger icon (‚ò∞) or presses Ctrl/Cmd+B to expand sidebar to 240px showing full page labels. Dashboard remains active. User clicks Trading Journal/Settings/Templates/Documentation/Export History (sees 'Coming Soon' placeholder for future development), returns to Dashboard. State persists in localStorage. 3) User clicks '‚úÖ Event Handlers' tab in library (right side - PRP-02 IMPLEMENTED), sees OnInit/OnDeinit grayed out (always included), browses 13 optional handlers organized in 6 categories (Required, Trading, Lifecycle, Data, Interaction, Testing). Clicks toggle switch for OnTick (turns green with checkmark), tooltip explains 'Called on every price tick - main trading logic for EAs'. User enables OnTimer, sees dependency warning 'Requires EventSetTimer() in OnInit'. Tests quick preset 'Standard EA' which enables OnTick only. 4) User explores Global Variable Management (PRP-03 IMPLEMENTED): ‚úÖ Views workspace with 3 sections - Global Variables Section (top, light blue, empty initially), Event Handlers Section (middle, shows enabled OnInit/OnDeinit/OnTick), Main Code Blocks Section (bottom, empty). Sidebar shows count badges. **PLANNED JOURNEY (Phases 2-5 - 80% Remaining):** 5) [NEEDS PRP-05 Drag-Drop] User clicks 'Indicators' tab in library, drags 'RSI Indicator' snippet to workspace - system automatically creates 3 mini global variable blocks (g_rsi_period = 14, g_rsi_overbought = 70.0, g_rsi_oversold = 30.0) in Global Variables Section at top, plus main RSI code block in Main Code Section. 6) [CURRENT - PRP-03] User clicks on g_rsi_period input field (shows [14] in light gray box), field turns blue border, text auto-selects, types 21, presses Enter - value updates to 21, border turns green with checkmark, text becomes bold. Validation message shows '‚úì Valid: 1-100'. 7) User clicks on g_rsi_overbought field, changes from 70.0 to 75.0 using up arrow spinner (‚ñ≤), field shows green modified state. Presses Tab to navigate to g_rsi_oversold, types 25.0, validation shows red border 'Must be < overbought threshold'. Corrects to 30.0. 8) [NEEDS PRP-05/06] User drags 'Moving Average' snippet - 2 new globals appear with input fields (g_ma_period = 20, g_ma_shift = 0), MA block appears in Main Code Section. User edits g_ma_period to 50 via keyboard (arrows to increment). 9) [NEEDS PRP-06/09] User clicks 'Utilities' tab, drags 'Calculate Lot Size' - 1 new global appears (g_risk_percent = 1.0), lot size function appears in Main Code. User bulk-selects all 3 risk globals, clicks 'Edit Selected', changes risk from 1.0 to 2.0 across all. 10) [NEEDS PRP-15 Trading Journal - DAVID PERSONA] David clicks üìä Trading Journal in sidebar, sees Month view calendar for current month. Calendar shows 28 days with color-coded backgrounds: green days (profitable), red days (loss), gray days (no trades). Clicks Nov 13 (green day +$342.50), daily statistics overlay appears showing: 'Volume: 12.5 lots, # Trades: 8, Win Rate: 62.5% (5W/3L), P/L: +$342.50, Comments: Good momentum trades'. 11) [NEEDS PRP-15] David clicks '+ Add Trade' button, modal opens with 9-field form. Fills: Type=BUY, Volume=1.5, Symbol=EURUSD, DateTime=2025-11-13 09:45:00, P/L=$127.30, Broker=IC Markets, Platform=MT5, SecurityType=Forex, Comments='MA crossover signal'. Clicks Save, trade appears in Day view hourly breakdown. Calendar updates daily P/L to +$469.80, tile turns darker green. 12) [NEEDS PRP-15] David switches to Week view, sees 7-day grid (Nov 11-17) with daily summaries. Monday shows 15 trades/$425.60, Tuesday 12 trades/$342.50 (current), rest of week empty. Clicks 'üì• Import CSV' button, uploads broker statement CSV (30 trades from Nov 1-10). Preview modal shows parsed data: 'Detected 30 trades, 3 duplicates found (DateTime+Symbol match), Import 27 new trades?' Confirms. Calendar auto-populates Nov 1-10 with color-coded days. 13) [NEEDS PRP-15] David switches to Month view, sees full November calendar now populated. Filters by Symbol=EURUSD (shows only EUR trades, 18 total), then clears filter, switches filter to SecurityType=Forex. Clicks 'üîç Analytics' button, sees cumulative P/L chart (line graph showing +$2,140 total for November), win rate trend (started 45%, now 58%), most profitable symbol (GBPUSD +$680). 14) [NEEDS PRP-15] David switches to Yearly view, sees 12-month grid (Jan-Dec 2025). Each month tile shows: trade count, total P/L, win rate. Clicks October tile, drills down to October Month view calendar. Returns to November, clicks 'üì§ Export' dropdown, selects 'Export as CSV', downloads 'Trading_Journal_Nov2025.csv' with all 45 trades and 9 fields. 15) [NEEDS PRP-11 Documentations] User switches to 'Documentations' tab, clicks '+ Add Documentation', fills modal: Title='MA-RSI Strategy', Category='Strategy Explanation', Content='This strategy combines 50-period MA trend filter with 21-period RSI momentum...', saves. Documentation block appears in Documentations tab (white/cream background, üìÑ text icon), user clicks 'View Full' to read in modal with Markdown rendering. 16) [NEEDS PRP-11] User pins documentation, switches back to 'Indicators' tab, enables split-screen viewing to reference strategy doc while continuing to build. 17) [NEEDS PRP-06/05] User adds 'Pre-made Functions' ‚Üí 'Confirmation-Based Buy Entry', drags to workspace. Dependency graph shows üîó links from g_rsi_period to RSI block and Buy Entry function. 18) [NEEDS PRP-12/13 Code Assembly/Preview] User clicks 'Preview' button in bottom bar - modal opens showing complete MQL5 code with Monaco syntax highlighting, statistics panel shows: 247 lines, 8 functions, 6 blocks used, 3 handlers enabled (OnInit/OnDeinit/OnTick from PRP-02), 6 globals (reads modified values from input fields in PRP-03). 19) [NEEDS PRP-13] User reviews code structure: sees globals at top with modified values (g_rsi_period=21, g_ma_period=50, g_risk_percent=2.0), then OnInit with EventSetTimer(60), OnDeinit with EventKillTimer, OnTick with indicator reading and trading logic, then custom functions. Clicks 'Copy All'. 20) [NEEDS PRP-14 Export] User clicks 'Save', filename auto-generates 'EA_MA_RSI_Strategy_20251113_143545.txt', downloads. Workspace state auto-saved to localStorage (global values, enabled handlers, documentation). 21) [EXTERNAL MT5] User opens MetaEditor, creates new EA, pastes code, compiles successfully (0 errors), attaches to chart in MetaTrader 5, EA trades using configured parameters. David runs backtest with strategy tester, exports backtest results as CSV, imports into Trading Journal (PRP-15) to compare EA performance vs manual trading. 22) [NEEDS PRP-14/11/15] User returns to builder, workspace auto-restored from localStorage, clicks 'Documentations' tab, adds new doc 'Parameter Optimization Log - Backtest Results', records testing results. David adds Trading Journal Note category doc comparing EA win rate (68%) vs manual (58%), decides to refine manual entry timing based on EA logic.",
  "Technical Considerations": "**IMPLEMENTED (Phase 1):** Frontend: Next.js 15 with React 19, App Router, TypeScript strict mode, Tailwind CSS 4 (PostCSS) for styling. ‚úÖ Navigation (PRP-01): Client-side routing for sidebar page switching (Dashboard active, Trading Journal/Settings/Templates/Documentation/Export History with 'Coming Soon' placeholders), sidebar state managed with React Context + localStorage persistence (key: 'mql5-builder-sidebar-state'), keyboard event listeners for Ctrl/Cmd+B toggle shortcut (event.preventDefault), CSS transitions (300ms ease-in-out) for smooth sidebar expansion/collapse (transform: translateX), responsive behavior with mobile overlay (position: fixed, z-index: 50) on screens <768px with click-outside-to-close. ‚úÖ Event Handler Management (PRP-02): React state for 15 handler toggles (useState + useEffect for localStorage sync key: 'mql5-builder-handlers'), checkbox inputs with visual indicators (green checkmark when enabled), tooltip components (Radix UI Tooltip or custom CSS), preset button functions (enableStandardEA, enableTimeBased, enableStrategyTester). ‚úÖ Global Variable System (PRP-03): React refs for input fields (useRef array), controlled inputs with onChange handlers, validation functions (validateNumber, validateRange) with real-time error state, styled input components with 4 CSS states (default/focus/invalid/modified), keyboard event handlers (onKeyDown for Tab/Enter/Escape/ArrowUp/ArrowDown), dependency tracking data structure (Map<globalId, blockId[]>), auto-grouping logic with section sorting, localStorage sync for modified values (key: 'mql5-builder-global-values'). **PLANNED (Phases 2-5):** Drag-and-Drop (PRP-05): dnd-kit library (modern, performant, accessible, @dnd-kit/core + @dnd-kit/sortable) for snippet/block interactions with sortable and droppable contexts, sensors for mouse/touch/keyboard. State Management: React Context API + useReducer for workspace state (blocks, positions, sections), Zustand for global app state (optional for complex state), localStorage sync with debouncing (300ms). Storage (PRP-14): Browser localStorage (5-10MB) for custom snippets (~500KB for 100 snippets), tab configurations (~50KB), workspace state (~200KB per workspace), global variable values (PRP-03 ~10KB), event handler selections (PRP-02 ~2KB), documentation (PRP-11 ~1MB for 50 docs), recent projects (~100KB). Export/import JSON for backup when approaching limits. Code Highlighting (PRP-13): Monaco Editor (@monaco-editor/react) with MQL5 language definition, or Prism.js as lightweight alternative (~20KB). Code Assembly (PRP-12): Custom engine with template literals and position-based sorting, global variable value reader from input field refs (PRP-03), event handler filter reading enabled handlers from state (PRP-02), dependency graph for correct ordering, MQL5 structure templates (header/properties/includes/globals/inputs/handlers/functions). Validation: Basic MQL5 syntax checking with regex patterns, real-time validation on global variable inputs (PRP-03 already implemented with min/max/step constraints), compilation simulation for preview (PRP-13). Testing: Playwright for E2E tests (sidebar toggle, event handler selection, global variable editing with keyboard, drag-drop when implemented), Jest + React Testing Library for unit tests (validation functions, state management, component rendering), 80%+ code coverage target. Documentation Management (PRP-11): Markdown parsing with marked.js or remark (~20KB), preview rendering with react-markdown, export to PDF with jsPDF, import from .md/.txt files. Export (PRP-14): Client-side file generation using Blob API + createObjectURL for .txt export, workspace state as JSON, JSZip for bulk documentation export, FileSaver.js polyfill for cross-browser compatibility. Performance: Virtualization for large snippet lists with react-window (when 100+ snippets), debounced auto-save (300ms delay), lazy loading for documentation content (React.lazy), code splitting by route (Next.js automatic), web workers for heavy code assembly operations (PRP-12 when processing 50+ blocks). Accessibility: WCAG 2.1 AA compliance, keyboard navigation (Tab, Enter, Escape, Arrows, Space - PRP-03 partially implemented for global inputs), screen reader labels (ARIA attributes on all interactive elements), focus management (focus trap in modals), high contrast mode support (CSS prefers-contrast). Target Language: MetaQuotes Language 5 (MQL5) for MetaTrader 5 build 3865+ compatibility, validated against MQL5 Reference documentation.",
  "Risks & Dependencies": "**FOUNDATION RISKS (Current Phase 1):** Risk A: Sidebar state persistence fails across browser sessions (localStorage issues). Mitigation: ‚úÖ Implemented (PRP-01) with fallback to default collapsed state, try-catch around localStorage access, test in private browsing mode. Risk B: Event handler selections not intuitive for beginner users (don't understand OnTick vs OnTimer). Mitigation: ‚úÖ Implemented (PRP-02) with comprehensive tooltips explaining each handler's purpose, dependency warnings, quick preset buttons (Standard EA auto-enables OnTick), organized in 6 categories with clear labels. Risk C: Global variable input validation too restrictive or confusing for users. Mitigation: ‚úÖ Implemented (PRP-03) with 4 clear visual states (default/focus/invalid/modified), error messages explaining constraints, keyboard navigation with arrow increments, reset to default button, real-time feedback on valid ranges. **UPCOMING RISKS (Phases 2-5):** Risk 1: Users create invalid EA logic that compiles but doesn't trade correctly (e.g., wrong entry conditions, missing exit logic). Mitigation: [PRP-11 Planned] Comprehensive documentation tab with strategy examples and best practices, [PRP-06/09/10 Planned] pre-test all 100+ pre-built snippets in real MT5 Build 3865+, [Future] 'Strategy Validator' checking for common logical errors (no exit logic, conflicting signals, missing risk management), educational tooltips on each snippet explaining trading concepts. Risk 2: Browser localStorage limitations (5-10MB) restrict users with 100+ custom snippets, 50+ documentation files, or 1000+ trading journal entries. Mitigation: [PRP-14/15 Planned] Export/import for snippet libraries, workspace backups, and trading journal CSV exports to file system, storage usage indicator (progress bar '6.2MB / 10MB used'), compress data with LZString library, [PRP-15] IndexedDB option for large trade datasets (>5000 trades), [Post-Launch] cloud sync option (Firebase/Supabase), warning modal at 80% capacity prompting export. Risk 2b: [PRP-15] CSV import format inconsistencies across brokers (different column names, date formats, timezone handling). Mitigation: Flexible CSV parser with format auto-detection (Papa Parse library), support for multiple broker formats (MT5, IC Markets, OANDA, etc.), date parsing with timezone conversion (date-fns), column mapping UI if auto-detection fails, import preview showing parsed data before confirmation, comprehensive error messages with example formats. Risk 2c: [PRP-15] Duplicate trade detection accuracy (false positives/negatives when matching DateTime+Symbol). Mitigation: Configurable matching criteria (exact DateTime match vs ¬±1min tolerance, include Volume in matching, optional Broker/Platform fields), visual duplicate preview in import modal ('3 duplicates found - click to review'), manual override allowing user to force import duplicates, matching algorithm using normalized DateTime (strip milliseconds) + uppercase Symbol. Risk 3: MQL5 syntax changes with MetaTrader updates (2-4x per year) breaking pre-built snippets. Mitigation: [PRP-06 Planned] Version tracking for snippets (snippet_v1.0_MT5_3865), update notification system checking MQL5 changelog, [Post-Launch] community contribution system for updated snippets, compatibility mode selector (Build 3800-3900 vs 3900+), automated testing pipeline validating syntax. Risk 4: Global variable name conflicts when multiple snippets create same variable (e.g., two indicators both want g_period). Mitigation: [PRP-03 Enhanced] Auto-rename with suffix (g_period ‚Üí g_rsi_period, g_ma_period), conflict warning modal with merge option, namespace system enforced in snippet templates (always prefix with snippet name), [PRP-03 Implemented] dependency graph showing all globals and their sources with üîó icon. Risk 5: Users forget to enable critical event handlers (e.g., forget OnTick, EA never trades). Mitigation: [PRP-02 Enhanced Future] Smart recommendations ('Your EA has indicators but no OnTick - enable OnTick to process signals'), [PRP-13 Planned] validation warnings in preview before export ('No trading logic detected - OnTick is disabled'), [PRP-02 Implemented] quick preset buttons guide beginners, guided first-time user flow with tutorial. **DEPENDENCIES:** Dependency 1: Requires MetaEditor and MetaTrader 5 installed locally to compile and test exported EAs (cannot execute MQL5 in browser). Mitigation: [PRP-11 Planned] Clear instructions in Documentations tab with screenshots, link to official MT5 download (https://www.metatrader5.com), [Future] video tutorial showing export ‚Üí MetaEditor ‚Üí compilation ‚Üí attach to chart workflow, [Future] optional online MQL5 syntax checker API for validation without MT5. Dependency 2: Pre-built snippet library must be comprehensive (target: 100+ snippets) for common use cases before launch. Mitigation: [PRP-09/10 Planned Phase 4] Prioritize most-used patterns (MA crossover, RSI momentum, ATR volatility, risk-based lot calculation), gather requirements from 10 beta traders, analyze 50+ existing MT5 EAs for common patterns, ensure coverage across all 5 default tabs. Phased rollout: Phase 3 launch with 50 core snippets (20 utilities + 15 indicators + 10 functions + 5 doc templates), Phase 4 expand to 100+ with community feedback. Dependency 3: Users need basic trading knowledge (RSI, moving average, stop loss concepts) even with visual builder. Mitigation: [PRP-06 Planned] Tooltips explaining each indicator's purpose in plain English ('RSI measures momentum, values >70 = overbought'), [PRP-11 Planned] documentation templates with beginner-friendly strategy explanations, hover preview showing what each snippet does without jargon, suggested learning path in onboarding (start with simple MA ‚Üí add RSI ‚Üí add risk management ‚Üí add time filters). Dependency 4: [PRP-11] Markdown rendering library adds bundle size (~20-50KB). Mitigation: Use lightweight marked.js or remark (~20KB gzipped), lazy load Markdown parser only when Documentations tab first opened (React.lazy), consider basic formatting (bold/italic/lists only) without full Markdown if bundle critical, monitor bundle size target <500KB total. Dependency 5: [PRP-02 Implemented] Event Handler Tab depends on understanding MQL5 event model (OnInit vs OnTick vs OnTimer). Mitigation: ‚úÖ Implemented comprehensive tooltips with use case examples, organized in 6 logical categories, dependency warnings (OnTimer requires EventSetTimer), preset buttons for common EA types eliminate need to understand every handler initially. Dependency 6: [PRP-05 Planned] Drag-and-Drop system requires robust state management for block positions and section organization. Mitigation: Use proven dnd-kit library (maintained, accessible, TypeScript support), React Context + useReducer for predictable state updates, localStorage sync for persistence, extensive E2E testing with Playwright covering drag operations, insertion indicators, reordering within sections. Dependency 7: [PRP-12/13 Planned] Code Assembly Engine requires deep MQL5 knowledge for correct structure and ordering. Mitigation: Analyze 100+ real MT5 EAs for common patterns, reference official MQL5 documentation (https://www.mql5.com/en/docs), implement MQL5 structure templates (header/properties/includes/globals/inputs/handlers in correct order/functions), validate output with MetaEditor compilation (target >90% success rate), include error detection and helpful messages. **TECHNICAL DEPENDENCIES (Implemented):** ‚úÖ PRP-01: React Context API for sidebar state, localStorage browser API for persistence, CSS transitions for animations, Tailwind CSS for responsive styling. ‚úÖ PRP-02: React hooks (useState, useEffect) for handler state management, localStorage for persistence, Radix UI or custom tooltip components. ‚úÖ PRP-03: React refs (useRef) for input field access, controlled input pattern (onChange handlers), validation functions with min/max/step logic, localStorage for modified values, CSS for 4 visual states. **TECHNICAL DEPENDENCIES (Planned):** PRP-04/05: dnd-kit library (@dnd-kit/core + @dnd-kit/sortable), React Context for workspace state. PRP-06-11: localStorage (5-10MB limit), marked.js/remark for Markdown, Prism.js/Monaco for syntax highlighting. PRP-12-14: Template literals for code generation, Blob API for file export, FileSaver.js polyfill, JSZip for bulk export. PRP-15 Trading Journal: react-big-calendar or custom calendar UI, Papa Parse for CSV import, date-fns/Day.js for date handling, Chart.js/Recharts for analytics charts, jsPDF for PDF export, localStorage/IndexedDB for trade storage (2-5MB for 1000 trades).",
  "Timeline & Milestones": "**‚úÖ COMPLETED - Phase 1 Foundation (Weeks 1-4, ~120 hours actual):** ‚úÖ PRP-01: Sidebar Navigation System (16h) - Collapsible sidebar (64px/240px), keyboard shortcut (Ctrl/Cmd+B), localStorage persistence, 5 navigation pages (Dashboard active, Settings/Templates/Documentation/Export History show 'Coming Soon' placeholders), hamburger menu toggle, smooth 300ms animations, responsive mobile overlay (<768px), state managed with React Context. ‚úÖ PRP-02: Event Handler Tab (20h) - Tab in Code Library with 15 toggleable MQL5 event handlers (OnInit/OnDeinit always included + 13 optional), organized in 6 categories (Required, Trading, Lifecycle, Data, Interaction, Testing), visual indicators (green checkmark when enabled), tooltips explaining each handler's purpose and use cases, dependency warnings (OnTimer requires EventSetTimer), quick preset buttons (Standard EA, Time-Based, Strategy Tester), integrated with future code assembly. ‚úÖ PRP-03: Workspace Management with Global Variable Generation (40h) - Workspace with 3 organized sections (Global Variables Section at top with light blue background, Event Handlers Section showing enabled handlers, Main Code Blocks Section), automatic mini global variable block creation system, **always-visible styled input fields** with 4 visual states (default light gray, focus blue border, invalid red with error, modified green with checkmark), real-time validation with min/max/step constraints, number spinners (‚ñ≤‚ñº), keyboard navigation (Tab/Enter/Escape/arrows), inline editing with auto-select, dependency tracking (üîó icon), smart deletion warnings, auto-grouping with collapsible sections, sortable A-Z, count badges, bulk editing support, reset to default button. **Deliverable:** Foundation architecture with 3 PRPs implemented, 21% feature complete (3/14). Users can: toggle sidebar with keyboard shortcut, select event handlers with presets, view workspace section structure, understand global variable input system. **Testing:** Manual testing of sidebar collapse/expand, keyboard shortcut, localStorage persistence, event handler toggles, workspace section layout. **CURRENT PHASE - Phase 2 Layout & Trading Tools (Weeks 5-11, 272 hours estimated):** üìã PRP-04: Dashboard Layout & Structure (24h) - Integrate sidebar with 3-column responsive layout (sidebar + workspace + library), bottom bar with Preview/Save buttons, dynamic width adjustment based on sidebar state (ml-16 collapsed, ml-60 expanded), visual separators between sections, split-screen capability for documentation viewing. üìã PRP-05: Drag-and-Drop System (32h) - Implement dnd-kit library for snippet manipulation, drag from library to workspace with visual feedback (ghost image, drop zone highlighting), insert between blocks with dotted line indicator, reorder blocks within workspace, drag globals within section, keyboard accessibility (Space/arrows/Enter), undo/redo support. üìã PRP-15: Trading Journal & Calendar (HIGH PRIORITY - 112h total) - Week 5-6 (24h): Calendar UI with 4 view modes (Day hourly breakdown, Week 7-day grid, Month color-coded calendar with green/red/gray tiles, Yearly 12-month overview), view switcher buttons, responsive grid layouts (CSS Grid/Flexbox), color-coding algorithm (daily P/L calculation: green if >0, red if <0, gray if no trades). Week 7 (16h): Manual entry form modal with 9 fields (Type dropdown BUY/SELL, Volume number input with validation, Symbol text input uppercase, DateTime picker, P/L number input with currency formatting, Broker text input, Platform dropdown MT5/MT4/cTrader, SecurityType dropdown Forex/Stocks/Futures/Crypto, Comments textarea), form validation (required fields, numeric ranges), save to localStorage trades array. Week 8 (20h): CSV import functionality (file input, Papa Parse integration, format auto-detection for MT5/broker statements, preview modal showing parsed trades with column mapping, duplicate detection comparing DateTime+Symbol, configurable tolerance ¬±1min, import confirmation with statistics '27 new trades, 3 duplicates skipped'). Week 9 (16h): Daily statistics calculation and overlay on calendar tiles (aggregate from trades array: Total Volume sum, # Trades count, Win Rate percentage calculation 5W/3L=62.5%, Total P/L sum with currency formatting, Comments preview first 50 chars), hover tooltip showing full stats. Week 10 (20h): Filtering and analytics (filter by Symbol/Type/SecurityType/Broker, date range picker, cumulative P/L line chart with Chart.js, win rate trend chart, most profitable Symbol bar chart, reset filters button, export filtered results). Week 11 (16h): Export functionality (CSV export with all 9 fields, PDF report generation with jsPDF showing calendar + statistics, integration with EA backtest results import from PRP-12/14, 'Export to Trading Journal' button in code preview). **Deliverable:** Interactive dashboard with drag-drop, plus fully functional Trading Journal accessible from sidebar Page 2 with calendar visualization, manual entry, CSV import, analytics, and export capabilities. **Testing:** E2E tests for drag-drop operations, calendar view switching, trade entry form validation, CSV import with various broker formats, duplicate detection, daily statistics calculations, filtering, chart rendering, PDF export. **NEXT PHASE - Phase 3 Library System (Weeks 12-15, 160 hours estimated):** üìã PRP-06: Code Snippet Library (40h) - Implement 5 default tabs with 20-30+ pre-built MQL5 snippets per tab (Utilities: position sizing/risk management/time filters, Indicators: MA/RSI/MACD/ATR/BB, Pre-made Functions: entry/exit logic, Event Handlers: already implemented PRP-02, Documentations: planned PRP-11), solid border draggable blocks, descriptions, parameters, integration with Global Variable Generation (PRP-03 for auto-creating input fields). üìã PRP-07: Library Tabs Management (20h) - Tab system with create/rename/delete custom tabs, + button, reorder tabs via drag, persistence in localStorage, export/import configurations. üìã PRP-08: Custom Code Snippets (24h) - User-created snippets with modal editor (name, description, code textarea with syntax highlighting, parameters, global variable definitions), MQL5 validation, localStorage persistence, edit/delete via context menu, move between tabs. **Deliverable:** Complete snippet library with 100+ pre-built snippets across 5 tabs, custom snippet creation capability. **Testing:** E2E tests for snippet dragging, custom snippet creation/editing/deletion, tab management, localStorage persistence. **PHASE 4 - Content Population (Weeks 16-19, 160 hours estimated):** üìã PRP-09: Utilities Tab Content (32h) - Curate 30+ utility snippets (position sizing, risk management, time filters, account functions, price utilities), each generating 1-3 globals with input fields, pre-test all in MT5 Build 3865+. üìã PRP-10: Indicators Tab Content (32h) - Curate 25+ technical indicator snippets (trend/momentum/volatility/volume), each generating 2-5 globals for parameters, complete handle initialization and buffer reading. üìã PRP-11: Documentations Tab Content (32h) - Implement documentation management system (create/edit/delete text docs), 6 categories including Trading Journal Notes (for strategy explanations separate from trade entries in PRP-15), Markdown support with preview (marked.js or remark), search/filter by category/tags, export as .txt/.md/.pdf, 10+ templates, pin docs, split-screen viewing, white/cream background styling, text icon (üìÑ), cannot drag to workspace (reference only). **Deliverable:** Fully populated library with 100+ code snippets and documentation management system. **Testing:** Validate all snippets compile in MT5, test Markdown rendering, documentation export formats. **PHASE 5 - Code Generation & Export (Weeks 20-23, 160 hours estimated):** üìã PRP-12: Code Assembly Engine (48h) - Build engine to combine blocks into proper MQL5 EA structure (header/properties/includes/globals reading values from input fields PRP-03/inputs/event handlers only enabled from PRP-02 in correct order/custom functions), dependency resolution, variable deduplication, auto-indentation, comment generation, template literals, optional integration with Trading Journal (PRP-15) to export backtest results. üìã PRP-13: Code Preview System (32h) - Modal preview with Monaco Editor MQL5 syntax highlighting, statistics panel (lines, functions, blocks, enabled handlers count from PRP-02, globals count from PRP-03, compilation estimate), copy to clipboard, basic syntax validation, error highlighting, download as .mq5, search within preview, 'Export Backtest to Trading Journal' button if EA includes OnTester handler. üìã PRP-14: Save & Export System (40h) - Export as .txt file (MetaEditor compatible), automatic filename with timestamp, save/load workspace configuration (block positions, global values from PRP-03, enabled handlers from PRP-02, custom tabs PRP-07, documentation PRP-11), export workspace as JSON, version management, recent projects list (last 10), auto-save every 30 seconds, export/import for localStorage backup, CSV export for backtest results compatible with Trading Journal import format (PRP-15). **Deliverable:** Complete code generation pipeline from workspace to exportable MQL5 file with Trading Journal integration. **Testing:** E2E tests for preview, export, save/load workspace, validate exported EAs compile in MetaEditor with 0 errors, test auto-save recovery, test backtest results export to Trading Journal CSV format. **LAUNCH - Phase 6 Polish & Deploy (Weeks 24-25, 80 hours):** UAT with 10 beta testers (traders with varying MQL5 experience) (24h), bug fixing based on feedback (24h), UI/UX polish (animations, loading states, error messages, empty states) (16h), accessibility audit and WCAG 2.1 AA improvements (8h), performance optimization (code splitting, lazy loading, bundle <500KB) (8h). Deployment to production (Vercel/Netlify, CDN, analytics) (8h). **Deliverable:** Production-ready MQL5 EA Builder at mql5-ea-builder.com. **Success Metrics:** 50+ beta signups, 20+ EAs created first week, <3 critical bugs, average export time <20 min, satisfaction >4.0/5.0, 90%+ compilation success rate, >50% of active users adopt Trading Journal feature (PRP-15), >40% use CSV import for bulk trade tracking. **POST-LAUNCH - Roadmap (Months 2-6):** Month 2: Community snippet sharing platform (user submissions, voting, quality review), Trading Journal cloud sync (backup trades to Firebase/Supabase). Month 3: Cloud sync expansion (workspace/snippets), Trading Journal mobile app (iOS/Android for on-the-go trade entry). Month 4: Collaboration features (share workspace link, real-time co-editing, comments), Trading Journal sharing (export public performance reports, anonymized leaderboards). Month 5: Advanced code analysis (complexity metrics, optimization suggestions), Trading Journal advanced analytics (drawdown charts, Sharpe ratio, equity curve, correlation analysis between strategies). Month 6: AI assistant for snippet recommendations and documentation generation (OpenAI API), AI-powered trade analysis in Trading Journal (pattern recognition, risk suggestions), tablet-optimized version (iPad Pro) with touch drag-drop. **CURRENT STATUS (November 13, 2025):** 3/15 PRPs completed (20%), foundation architecture in place, ready to begin Phase 2 (Dashboard Layout + Drag-Drop System + Trading Journal as HIGH PRIORITY)."
}

## Final Output Template (use ONLY at the end)
When all fields above are filled, output just this Markdown with all placeholders replaced. Do not include examples, guidance, or meta text.

# Product Requirements Document (PRD)

## 1. Product Overview
**Title:** {{Title}}  
**Summary:** {{Summary}}  
**Target Audience:** {{Target Audience}}

## 2. Goals & Success Metrics
- **Business Goals:** {{Business Goals}}
- **User Goals:** {{User Goals}}
- **Key Metrics:** {{Key Metrics}}

## 3. User Personas
{{#each User Personas}}
- **{{Name}} ({{Role/Segment}})**  
  - Goals: {{Goals}}  
  - Pain Points: {{Pain Points}}
{{/each}}

## 4. Core Features
{{#each Core Features}}
- **{{Feature Name}}** ({{Priority}}) ‚Äî {{Description}}
{{/each}}

## 5. User Journey
{{User Journey}}

## 6. Technical Considerations
{{Technical Considerations}}

## 7. Risks & Dependencies
{{Risks & Dependencies}}

## 8. Timeline & Milestones
{{Timeline & Milestones}}

## Start the Guided Flow (turn 1)
Ask the first question about **Product Overview** and show a concise example.

Prompt structure for each turn:
- **Question:** <one focused question>  
- **Example (for guidance):** <one short example answer>  
- **Current PRD Draft:** <paste updated PRD_DRAFT block with only the fields filled so far>  
- **What‚Äôs Next:** <name the next section>